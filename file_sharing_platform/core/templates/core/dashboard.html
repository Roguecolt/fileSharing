<!DOCTYPE html>
<html>
  <head>
    <title>Dashboard</title>
  </head>
  <body>
    <h1>Welcome, {{ user.username }}!</h1>
    <p>
      <a href="{% url 'logout' %}">Logout</a> |
      <a href="{% url 'upload_file' %}">Upload a File</a>
    </p>
    {% if messages %} {% for message in messages %}
    <p>{{ message }}</p>
    {% endfor %} {% endif %}
    <h2>Your Files ({{ totalfiles }})</h2>
    <ul>
      {% for file in files %}
      <li>
        {{ file.name }} - Uploaded on {{ file.upload_date }}
        <a href="{% url 'share_file' file.id %}">Share</a> |
        <a href="{{ file.uploaded_file.url }}" download>Download</a>
      </li>
      {% empty %}
      <li>No files uploaded yet.</li>
      {% endfor %}
    </ul>
    <h2>Files Shared with You</h2>
    <ul>
      {% for shared in sharedfiles %}
      <li>
        {{ shared.file.name }} - Shared by {{ shared.file.user.username }} on {{
        shared.shared_date }}
        <a href="{{ shared.file.uploaded_file.url }}" download>Download</a>
      </li>
      {% empty %}
      <li>No files shared with you yet.</li>
      {% endfor %}
    </ul>
  </body>
</html>
